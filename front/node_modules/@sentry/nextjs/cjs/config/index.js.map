{"version":3,"file":"index.js","sources":["../../../src/config/index.ts"],"sourcesContent":["import { ExportedNextConfig, NextConfigFunction, NextConfigObject, SentryWebpackPluginOptions } from './types';\nimport { constructWebpackConfigFunction } from './webpack';\n\n/**\n * Add Sentry options to the config to be exported from the user's `next.config.js` file.\n *\n * @param userNextConfig The existing config to be exported prior to adding Sentry\n * @param userSentryWebpackPluginOptions Configuration for SentryWebpackPlugin\n * @returns The modified config to be exported\n */\nexport function withSentryConfig(\n  userNextConfig: ExportedNextConfig = {},\n  userSentryWebpackPluginOptions: Partial<SentryWebpackPluginOptions> = {},\n): NextConfigFunction | Partial<NextConfigObject> {\n  // If the user has passed us a function, we need to return a function, so that we have access to `phase` and\n  // `defaults` in order to pass them along to the user's function\n  if (typeof userNextConfig === 'function') {\n    return function (phase: string, defaults: { defaultConfig: NextConfigObject }): Partial<NextConfigObject> {\n      const materializedUserNextConfig = userNextConfig(phase, defaults);\n      return {\n        ...materializedUserNextConfig,\n        webpack: constructWebpackConfigFunction(materializedUserNextConfig, userSentryWebpackPluginOptions),\n      };\n    };\n  }\n\n  // Otherwise, we can just merge their config with ours and return an object.\n  return {\n    ...userNextConfig,\n    webpack: constructWebpackConfigFunction(userNextConfig, userSentryWebpackPluginOptions),\n  };\n}\n"],"names":[],"mappings":";;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;"}